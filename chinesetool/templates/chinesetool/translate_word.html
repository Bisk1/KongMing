{% extends "chinesetool/base.html"%}
{% load i18n %}
{% block content %}
<h1></h1>

    <script type="text/javascript">
        $(document).ready(function() {
            $("#check").click(function() {
                    var input_string = $("#proposition").val();
                    $.ajax({
                        url : "/ajaxexample_json",
                        type : "POST",
                        dataType: "json",
                        data : {
                            client_response : input_string,
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                            },
                            success : function(json) {
                                $('#result').html("{% trans "Result" %}: "+json.result);
                                $('#correct').html("{% trans "Correct answer:" %}: "+json.correct);
                                $('#number').html("{% trans "Word number" %}: "+json.number);
                                $('#fails').html("{% trans "Wrong answers" %}: "+json.fails);
                                $('h1').html(json.word_to_display);
                            },
                            error : function(xhr,errmsg,err) {
                                $('#result').html((xhr.status + ": " + xhr.responseText));
                            }
                    });
                    return false;
            });
        });
    </script>

{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

{% csrf_token %}
    <input type="text" name="proposition" id="proposition" value="{{ choice.id }}" />
    <label for="proposition">{% trans "Your translation" %}</label><br />
<button type = "button" id= "check">{% trans "Check" %}</button>
<p id = "result"></p>
<p id = "correct"></p>
<p id = "number"></p>
<p id = "fails"></p>

{% endblock %}



