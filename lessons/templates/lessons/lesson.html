{% extends "base.html"%}
{% block content %}
{% load staticfiles %}

<div class="col-md-12">
    <div class="widget wblue">
        <div class="widget-head">
        <div class="pull-left">Lekcja: {{ lesson.topic }}</div>
        <div class="clearfix"></div>
        </div>
    </div>
    <div class="widget-content">
        <div class="padd">
        {% if lesson %}
            <form class="form-horizontal" role="form" action="{% url 'lessons:modify_lesson' lesson_id=lesson.id %}" method="post">
        {% else %}
            <form class="form-horizontal" role="form" action="{% url 'lessons:add_lesson' %}" method="post">
        {% endif %}
            {% csrf_token %}
                <div class="form-group">
                    <label class="col-lg-4 control-label" for="topic">Temat:</label>
                    <div class="col-lg-8">
                        <input type="text" placeholder="Temat" class="form-control" id="topic" name="topic" value="{{ lesson.topic }}">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-lg-4 control-label" for="exercises_number">Liczba ćwiczeń:</label>
                    <div class="col-lg-8">
                        <input type="number" placeholder="Liczba ćwiczeń" class="form-control" id="exercises_number" name="exercises_number" value="{{ lesson.exercises_number }}">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-lg-4 control-label" for="requirement">Wymaganie:</label>
                    <div class="col-lg-8">
                        <select  class="form-control" id="requirement" name="requirement">
                            <option value="None">Brak</option>
                        {% for other_lesson in other_lessons %}
                            {% if lesson.requirement.topic == other_lesson.topic %}
                                <option value="{{ other_lesson.id }}" selected>{{ other_lesson.topic }}</option>
                            {% endif %}
                            {% if lesson.requirement.topic != other_lesson.topic %}
                                <option value="{{ other_lesson.id }}">{{ other_lesson.topic }}</option>
                            {% endif %}
                            {% endfor %}
                        </select>
                    </div>
                </div>
                <div class="form-group">
                {% if lesson %}
                    <div>
                        Ćwiczenia:
                        <div id="exercises">
                        {% include "lessons/exercises.html" %}
                        </div>
                    </div>
                 {% else %}
                    Zapisz lekcję, aby dodać ćwiczenia.
                {% endif %}
                </div>
                <button type="submit" id="save" class="btn btn-default">Zapisz</button>
            </form>
        </div>
    </div>
</div>


<div>
{% if lesson %}
    Dodaj ćwiczenie:
    <form action="{% url 'lessons:exercises:add_exercise' lesson_id=lesson.id %}" method="post">
    {% csrf_token %}
    <div class="form-group">
        <label class="control-label" for="exercise_type">Rodzaj:</label>
        <select class="form-control" id="exercise_type" name="exercise_type">
            {% for exercise_type in exercises_types %}
            <option value="{{ exercise_type.slug }}">{{ exercise_type.name }}</option>
            {% endfor %}
        </select>
    </div>
        <input type="submit" value="Dodaj" class="btn btn-default">
    </form>
{% endif %}
</div>


{% endblock %}
{% block footer %}
{% endblock %}

